<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"fdcumt.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.17.0","exturl":false,"sidebar":{"position":"left","width":300,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="概览 对于频繁修改的数据, 采用共享bunch的方式进行发送, 即对于同一份数据, bunch只构建一次, connection共享, 不进行重复构建. 不频繁更改的数据可以使用其他方式进行优化.">
<meta property="og:type" content="article">
<meta property="og:title" content="UE4网络优化-FastSharedPath">
<meta property="og:url" content="https://fdcumt.github.io/2024/05/15/UE/%E7%BD%91%E7%BB%9C/UE4%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96-FastSharedPath/index.html">
<meta property="og:site_name" content="NoBodyNoOne">
<meta property="og:description" content="概览 对于频繁修改的数据, 采用共享bunch的方式进行发送, 即对于同一份数据, bunch只构建一次, connection共享, 不进行重复构建. 不频繁更改的数据可以使用其他方式进行优化.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fdcumt.github.io/2024/05/15/UE/%E7%BD%91%E7%BB%9C/UE4%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96-FastSharedPath/assets/image-20240515091236899.png">
<meta property="article:published_time" content="2024-05-15T02:54:53.937Z">
<meta property="article:modified_time" content="2024-05-15T02:35:37.950Z">
<meta property="article:author" content="NoBodyNoOne">
<meta property="article:tag" content="UE">
<meta property="article:tag" content="UE网络">
<meta property="article:tag" content="FastSharedPath">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fdcumt.github.io/2024/05/15/UE/%E7%BD%91%E7%BB%9C/UE4%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96-FastSharedPath/assets/image-20240515091236899.png">


<link rel="canonical" href="https://fdcumt.github.io/2024/05/15/UE/%E7%BD%91%E7%BB%9C/UE4%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96-FastSharedPath/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://fdcumt.github.io/2024/05/15/UE/%E7%BD%91%E7%BB%9C/UE4%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96-FastSharedPath/","path":"2024/05/15/UE/网络/UE4网络优化-FastSharedPath/","title":"UE4网络优化-FastSharedPath"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>UE4网络优化-FastSharedPath | NoBodyNoOne</title><meta name="robots" content="noindex">
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">NoBodyNoOne</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">白驹过隙</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E8%A7%88"><span class="nav-number">1.</span> <span class="nav-text">概览</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">简述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%A6%E7%BB%86%E6%B5%81%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">详细流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%BB%E9%87%8D%E9%80%BB%E8%BE%91%E4%B8%8D%E8%A2%AB%E6%89%A7%E8%A1%8C"><span class="nav-number">2.2.</span> <span class="nav-text">去重逻辑(不被执行)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%B8%A7%E5%86%85%E4%B8%8D%E4%BC%9A%E9%87%8D%E5%A4%8Dreplication"><span class="nav-number">2.2.1.</span> <span class="nav-text">一帧内不会重复Replication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%83%8C%E5%AF%B9%E7%9D%80viewer-%E4%B8%8D%E4%BC%9A%E6%89%A7%E8%A1%8C"><span class="nav-number">2.2.2.</span> <span class="nav-text">背对着Viewer, 不会执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%9D%E7%A6%BB%E8%BF%87%E8%BF%9C%E4%B8%8D%E4%BC%9A%E6%89%A7%E8%A1%8C"><span class="nav-number">2.2.3.</span> <span class="nav-text">距离过远不会执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E8%BF%87%E5%A4%A7%E4%B8%8D%E4%BC%9A%E6%89%A7%E8%A1%8C"><span class="nav-number">2.2.4.</span> <span class="nav-text">流量过大不会执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%B2%E7%BB%8F%E5%8F%91%E9%80%81%E8%BF%87-%E4%B8%8D%E6%89%A7%E8%A1%8C"><span class="nav-number">2.2.5.</span> <span class="nav-text">已经发送过, 不执行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%88%90%E5%91%98"><span class="nav-number">2.3.</span> <span class="nav-text">相关成员</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ffastsharedpathconstants"><span class="nav-number">2.3.1.</span> <span class="nav-text">FFastSharedPathConstants</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#distancerequirementpct"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">DistanceRequirementPct</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#maxbitsperframe"><span class="nav-number">2.3.1.2.</span> <span class="nav-text">MaxBitsPerFrame</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#listskipperframe"><span class="nav-number">2.3.1.3.</span> <span class="nav-text">ListSkipPerFrame</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ffastsharedreplicationinfo"><span class="nav-number">2.4.</span> <span class="nav-text">FFastSharedReplicationInfo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lastattemptbuildframenum"><span class="nav-number">2.4.1.</span> <span class="nav-text">LastAttemptBuildFrameNum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lastbunchbuildframenum"><span class="nav-number">2.4.2.</span> <span class="nav-text">LastBunchBuildFrameNum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bunch"><span class="nav-number">2.4.3.</span> <span class="nav-text">Bunch</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%90%AFfastsharedpath%E5%8A%9F%E8%83%BD"><span class="nav-number">3.1.</span> <span class="nav-text">开启FastSharedPath功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="nav-number">3.2.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%9D%E8%80%83"><span class="nav-number">4.</span> <span class="nav-text">思考</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E6%9E%9C%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%86%85%E4%B8%8D%E9%9C%80%E8%A6%81%E9%87%8D%E6%96%B0%E6%9E%84%E5%BB%BAbunch-%E9%92%88%E5%AF%B9%E6%9F%90%E4%BA%9Bconnection%E8%80%8C%E8%A8%80-%E6%98%AF%E5%90%A6%E4%BC%9A%E4%B8%8D%E5%8F%91-%E6%98%AF%E5%90%A6%E4%BC%9A%E9%87%8D%E5%8F%91-%E6%80%8E%E4%B9%88%E9%81%BF%E5%85%8D%E9%87%8D%E5%8F%91%E5%91%A2"><span class="nav-number">4.1.</span> <span class="nav-text">如果一段时间内不需要重新构建Bunch,
针对某些Connection而言, 是否会不发, 是否会重发, 怎么避免重发呢?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fastsharedpath%E6%98%AF%E5%90%A6%E6%9C%89%E4%B8%A2%E5%8C%85%E9%87%8D%E5%8F%91%E6%9C%BA%E5%88%B6-%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E4%B8%80%E5%AE%9A%E5%88%B0%E8%BE%BE%E5%91%A2"><span class="nav-number">4.2.</span> <span class="nav-text">FastSharedPath是否有丢包重发机制,
如果没有怎么保证一定到达呢?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%AFreliable%E8%BF%98%E6%98%AFunreliable"><span class="nav-number">4.3.</span> <span class="nav-text">是Reliable还是Unreliable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8Emulticastrpc%E7%9A%84%E5%BC%82%E5%90%8C"><span class="nav-number">4.4.</span> <span class="nav-text">与MulticastRPC的异同</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E7%82%B9%E5%9B%9E%E9%A1%BE"><span class="nav-number">5.</span> <span class="nav-text">重点回顾</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BB%B6%E5%B1%95"><span class="nav-number">6.</span> <span class="nav-text">延展</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">NoBodyNoOne</p>
  <div class="site-description" itemprop="description">欢迎来到我的世界</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">57</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/fdcumt" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;fdcumt" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/fdcumt" title="知 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;fdcumt" rel="noopener me" target="_blank"><i class="fa zhihu fa-fw"></i></a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fdcumt.github.io/2024/05/15/UE/%E7%BD%91%E7%BB%9C/UE4%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96-FastSharedPath/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="NoBodyNoOne">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoBodyNoOne">
      <meta itemprop="description" content="欢迎来到我的世界">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="UE4网络优化-FastSharedPath | NoBodyNoOne">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE4网络优化-FastSharedPath
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-05-15 10:54:53 / 修改时间：10:35:37" itemprop="dateCreated datePublished" datetime="2024-05-15T10:54:53+08:00">2024-05-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UE/" itemprop="url" rel="index"><span itemprop="name">UE</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UE/UE%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">UE网络</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UE/UE%E7%BD%91%E7%BB%9C/FastSharedPath/" itemprop="url" rel="index"><span itemprop="name">FastSharedPath</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="概览">概览</h1>
<p>对于频繁修改的数据, 采用共享bunch的方式进行发送, 即对于同一份数据,
bunch只构建一次, connection共享, 不进行重复构建.
不频繁更改的数据可以使用其他方式进行优化.</p>
<span id="more"></span>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240511163355663.png" /></p>
<h1 id="简述">简述</h1>
<h2 id="详细流程">详细流程</h2>
<p><strong>流程简述</strong>:在执行<code>ReplicateSingleActor_FastShared</code>的时候,
调用自定义的MulticastRPC进行Bunch数据填充, 然后在将该Bunch发送出去.
其中通过桥梁:<code>UReplicationGraph.FastSharedReplicationBunch</code>隔空连接数据.
由于该Bunch为共享, 所以每一帧只需要构建一次, 等待下次</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/fdsafdagdsafds.png" /></p>
<p>本帧没有重建过, 可以尝试进行重建, 调用SharedFastPathFunc,
执行重建Bunch逻辑:</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514204117815.png" /></p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514204222269.png" /></p>
<p>如果没有重建, 但是依旧返回true, 表明本帧不需要重建, 可以使用原来数据,
再次进行重发.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514204326112.png" /></p>
<h2 id="去重逻辑不被执行">去重逻辑(不被执行)</h2>
<h3 id="一帧内不会重复replication">一帧内不会重复Replication</h3>
<p>UE执行的顺序是先Replication, 然后在ReplicationFast.
而在Replication的时候会将<code>FConnectionReplicationActorInfo.LastRepFrameNum</code>赋值,
即;</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514193033880.png" /></p>
<p>所以在一帧内, 一个Actor不会即执行了Replication,
又执行了ReplicationFast.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514193222619.png" /></p>
<h3 id="背对着viewer-不会执行">背对着Viewer, 不会执行</h3>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514193237491.png" /></p>
<h3 id="距离过远不会执行">距离过远不会执行</h3>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514193249290.png" /></p>
<h3 id="流量过大不会执行">流量过大不会执行</h3>
<p>对于Connection, 如果执行FastSharedPath流量过大, 则会中断.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514193327781.png" /></p>
<h3 id="已经发送过-不执行">已经发送过, 不执行</h3>
<p>如果一个Connection, 已经发送过Bunch, 如果该Bunch还没有重新构建,
则不需要重复发送.
相关函数:<code>UReplicationGraph.ReplicateSingleActor_FastShared</code>,
代码位置:</p>
<p><img src="./assets/image-20240515091236899.png" /></p>
<h2 id="相关成员"><strong>相关成员</strong></h2>
<p>解析:</p>
<ol type="1">
<li>每个Actor只有一个<code>FGlobalActorReplicationInfo</code>与之相对应,
并用其表示网络中的相关数据. 代表数据:
上次构建的FastShared数据帧数:<code>FastSharedReplicationInfo.LastBunchBuildFrameNum</code></li>
<li>每个Actor在每个Connection中都有一个<code>FConnectionReplicationActorInfo</code>与之相对应,
并且用其表示在该Connection中的相关数据.
最具代表性的是这个Connection中上次执行FastShared的帧数:<code>FastPath_LastRepFrameNum</code>.</li>
</ol>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/1715419243964fds.png" /></p>
<h3 id="ffastsharedpathconstants">FFastSharedPathConstants</h3>
<h4 id="distancerequirementpct">DistanceRequirementPct</h4>
<p>如果Actor想要通过SharedFastPath传输在该Connection中传输,
必须距离ViewLocation(相机位置)足够近. 默认0.1</p>
<ol type="1">
<li>视野范围内(夹角为锐角)</li>
<li>距离足够近: 剔除距离*系数(DistanceRequirementPct)</li>
</ol>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514172241274.png" /></p>
<h4 id="maxbitsperframe">MaxBitsPerFrame</h4>
<p><span style="color:red">针对每个Connection, 每帧最大能发送的bit数,
默认值为2048bit, 如果超过这个数值则返回.</span>
在函数<code>UReplicationGraph.ReplicateActorListsForConnections_FastShared</code>中使用.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514171215734.png" /></p>
<h4 id="listskipperframe">ListSkipPerFrame</h4>
<p>用于计算随机数的基数. 默认值为3.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514171904703.png" /></p>
<h2 id="ffastsharedreplicationinfo">FFastSharedReplicationInfo</h2>
<p>LastAttemptBuildFrameNum表示这帧还没有Build, Rebuild试试.
而LastBunchBuildFrameNum则表示上次成功Build的帧数. 二者组合使用,
则可以控制Connection不会重复发送同一个Bunch,
并且保证每帧最多一次尝试Rebuild.</p>
<p>全局就一份, 每个Actor具有唯一一个.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240515093920783.png" /></p>
<h3 id="lastattemptbuildframenum">LastAttemptBuildFrameNum</h3>
<p>尝试Build Bunch的帧数, 是否成功不管. 只是这帧还没有Build过,
需要尝试进行build. 具体是否build有逻辑自行判断.</p>
<h3 id="lastbunchbuildframenum">LastBunchBuildFrameNum</h3>
<p>上一次Build成功的帧数. 这个是真正成功Build, Bunch也是新构建的.</p>
<h3 id="bunch">Bunch</h3>
<p>Multicast构建的Bunch存储在这里, 每个Actor只有一个, 全局共享.</p>
<h1 id="使用">使用</h1>
<h2 id="开启fastsharedpath功能">开启FastSharedPath功能</h2>
<p>UE中有命令控制FastShared功能是否开启. 如果为Shipping状态,
该命令会转换成一个简单的int32变量:<code>int32 CVar_RepGraph_FastShared_ForceFull = 0;</code>.</p>
<p>默认开启FastSharedPath功能.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否将FastSharedPath重定向到ReplicateSingleActor. 默认为0, 即不会重定向.</span></span><br><span class="line"><span class="built_in">REPGRAPH_DEVCVAR_SHIPCONST</span>(int32, <span class="string">&quot;Net.RepGraph.FastShared.ForceFull&quot;</span>, CVar_RepGraph_FastShared_ForceFull, <span class="number">0</span>, <span class="string">&quot;Redirects calls to ReplicateSingleActor_FastShared to ReplicateSingleActor&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="示例代码">示例代码</h2>
<p>实例:在ALSVCharacter.h中添加如下代码:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MakeSharedFastPath</span><span class="params">(FTestSharedFastPath &amp;OutSharedFastPathValue)</span></span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">TriggerSharedFastPath</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">NetMulticast_UpdateSharedReplication</span><span class="params">(<span class="type">const</span> FTestSharedFastPath &amp;InTestSharedFastPath)</span></span>;</span><br></pre></td></tr></table></figure>
<p>在ALSVCharacter.cpp中添加如下代码:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">AALSVCharacter::MakeSharedFastPath</span><span class="params">(FTestSharedFastPath&amp; OutSharedFastPathValue)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    OutSharedFastPathValue.FrameNum = FrameCounter;</span><br><span class="line">    OutSharedFastPathValue.b = FrameCounter % <span class="number">2</span> == <span class="number">1</span>;</span><br><span class="line">    OutSharedFastPathValue.Str = FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%s %d-%d&quot;</span>), *<span class="built_in">GetNameSafe</span>(<span class="keyword">this</span>), FrameCounter, OutSharedFastPathValue.b);</span><br><span class="line">    <span class="comment">// 只有构建成功才返回true, 否则返回false. 只需要关心具体逻辑, 然后填充数据</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要重新构建, 在SharedFastPath中调用MulticastRPC, 否则不调用MulticastRPC. </span></span><br><span class="line"><span class="comment">// 期望Connection发送该Bunch, 则返回true, 否则返回false.</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">AALSVCharacter::TriggerSharedFastPath</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FTestSharedFastPath SharedFastPathValue;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">MakeSharedFastPath</span>(SharedFastPathValue))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NetMulticast_UpdateSharedReplication</span>(SharedFastPathValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AALSVCharacter::NetMulticast_UpdateSharedReplication_Implementation</span><span class="params">(<span class="type">const</span> FTestSharedFastPath&amp; InTestSharedFastPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">GetLocalRole</span>() != ROLE_Authority)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">DebugLogALSVCharacter</span>(<span class="string">&quot;NetMulticast_UpdateSharedReplication_Implementation[%s], FrameNum[%d] b[%d] Str[%s]&quot;</span>,</span><br><span class="line">            *<span class="built_in">RoleTypeToString</span>(<span class="built_in">GetLocalRole</span>()), InTestSharedFastPath.FrameNum, InTestSharedFastPath.b, *InTestSharedFastPath.Str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在BaseReplicationGraph.cpp中添加如下代码:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在Class中添加FastSharedPath相关配置</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UBaseReplicationGraph::InitGlobalActorClassSettings</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    UReplicationGraph::<span class="built_in">InitGlobalActorClassSettings</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ReplicationGraph stores internal associative data for actor classes. </span></span><br><span class="line">    <span class="comment">// We build this data here based on actor CDO values.</span></span><br><span class="line">    <span class="keyword">for</span> (TObjectIterator&lt;UClass&gt; It; It; ++It)</span><br><span class="line">    &#123;</span><br><span class="line">        UClass* Class = *It;</span><br><span class="line">        AActor* ActorCDO = <span class="built_in">Cast</span>&lt;AActor&gt;(Class-&gt;<span class="built_in">GetDefaultObject</span>());</span><br><span class="line">        <span class="keyword">if</span> (!ActorCDO || !ActorCDO-&gt;<span class="built_in">GetIsReplicated</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Skip SKEL and REINST classes.</span></span><br><span class="line">        <span class="keyword">if</span> (Class-&gt;<span class="built_in">GetName</span>().<span class="built_in">StartsWith</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;SKEL_&quot;</span>)) || Class-&gt;<span class="built_in">GetName</span>().<span class="built_in">StartsWith</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;REINST_&quot;</span>)))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        FClassReplicationInfo ClassInfo;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Replication Graph is frame based. Convert NetUpdateFrequency to ReplicationPeriodFrame based on Server MaxTickRate.</span></span><br><span class="line">        ClassInfo.ReplicationPeriodFrame = <span class="built_in">GetReplicationPeriodFrameForFrequency</span>(ActorCDO-&gt;NetUpdateFrequency);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ActorCDO-&gt;bAlwaysRelevant || ActorCDO-&gt;bOnlyRelevantToOwner)</span><br><span class="line">        &#123;</span><br><span class="line">            ClassInfo.<span class="built_in">SetCullDistanceSquared</span>(<span class="number">0.f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            ClassInfo.<span class="built_in">SetCullDistanceSquared</span>(ActorCDO-&gt;NetCullDistanceSquared);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (It-&gt;<span class="built_in">IsChildOf</span>(AALSVCharacter::<span class="built_in">StaticClass</span>()) &amp;&amp; !It-&gt;<span class="built_in">HasAnyClassFlags</span>(CLASS_Abstract))</span><br><span class="line">        &#123; <span class="comment">// 对于子类也生效.</span></span><br><span class="line">            ClassInfo.FastSharedReplicationFuncName = <span class="built_in">TEXT</span>(<span class="string">&quot;NetMulticast_UpdateSharedReplication&quot;</span>);</span><br><span class="line">            ClassInfo.FastSharedReplicationFunc = [](AActor* InActor)</span><br><span class="line">                &#123;</span><br><span class="line">                    AALSVCharacter* ALSVCharacter = <span class="built_in">Cast</span>&lt;AALSVCharacter&gt;(InActor);</span><br><span class="line">                    <span class="keyword">if</span> (ALSVCharacter)</span><br><span class="line">                    &#123;</span><br><span class="line">                        ALSVCharacter-&gt;<span class="built_in">TriggerSharedFastPath</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        GlobalActorReplicationInfoMap.<span class="built_in">SetClassInfo</span>(Class, ClassInfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="思考">思考</h1>
<h2
id="如果一段时间内不需要重新构建bunch-针对某些connection而言-是否会不发-是否会重发-怎么避免重发呢">如果一段时间内不需要重新构建Bunch,
针对某些Connection而言, 是否会不发, 是否会重发, 怎么避免重发呢?</h2>
<p>原则: 每个Bunch, 对于Connection, 最多只发一次, Bunch重建之后重置.
即使是丢了, 也不重发.</p>
<p>实现: 每个Connection自身保存了发送该Bunch的帧数,
而全局共享数据存储了该Bunch的构建帧数,
二者可以保证当某个Connection要发送的时候是发过该bunch还是没发过,
如果没发过就发送, 如果发过了就不处理.</p>
<h2
id="fastsharedpath是否有丢包重发机制-如果没有怎么保证一定到达呢">FastSharedPath是否有丢包重发机制,
如果没有怎么保证一定到达呢?</h2>
<p>没有丢包重发机制, 目前版本没有保证一定到达. 需要自己写,
或者将Bunch强制设置为Reliable(改源码).
ReplicateActor的重发机制是因为用History记录了每个属性的修改记录,
并记录该Item对应的PackageIndex区间, 如果Nak到达,
则将HistoryItem设置为Resent. 而FastSharedPath发送的是RPC,
其没有属性记录, 所以无法执行Resent逻辑.</p>
<h2 id="是reliable还是unreliable">是Reliable还是Unreliable</h2>
<p>UnReliable. 它全程没有处理过该Bunch的Reliable属性, 所以使用默认值,
即Unreliable.</p>
<h2 id="与multicastrpc的异同">与MulticastRPC的异同</h2>
<p>MulticastRPC共享的是param, 都需要将序列化好的Param合并成一个bunch,
然后发送. 而SharedFastPath共享的是Bunch,
二者不可根本不是一个数量级的.</p>
<p>下图为MulticastRPC共享Param佐证:</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514210037938.png" /></p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514210149044.png" /></p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240514210408866.png" /></p>
<h1 id="重点回顾">重点回顾</h1>
<ol type="1">
<li><p>ReplicationGraph中有个Bunch指针, 隔空传递数据.</p></li>
<li><p>在FastPath中的ReplicateActor中调用RPC, 用于重建bunch,
然后将该Bunch发送.</p></li>
<li><p>所有Connection共享SharedPathBunch,
这样免除了重复构建的消耗.</p></li>
<li><p>ReplicateActor和Fast同一帧不会同时发送.</p></li>
<li><p>不同Channel发送同一个Bunch, 需要修改Bunch的相关数据:</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240515091556961.png" /></p></li>
<li><p>需要重新构建, 在SharedFastPath中调用MulticastRPC,
否则不调用MulticastRPC. 期望Connection发送该Bunch, 则返回true,
否则返回false.</p></li>
</ol>
<h1 id="延展">延展</h1>
<p>UE中其他类型的Bunch能否重复利用呢? 比如MulticastRPC的Bunch,
比如ReplicateActor的bunch?</p>
<ol type="1">
<li><p>MulticastRPC目前是SharedProperty, 可以改进成SharedBunch.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240511180145143.png" /></p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240511175939604.png" /></p></li>
<li><p>ReplicateActor的bunch是否可以改成Shared?</p>
<p>可以, 但是改动非常大, 而且和现在机制相悖,
好像UE5新版网络系统就是SharedBunch.</p></li>
<li><p>丢包重发</p>
<p>对于丢包的处理可以参考<code>FObjectReplicator::ReceivedNak</code>的相关处理.</p>
<p><img
src="https://raw.githubusercontent.com/fdcumt/ImageBed/master/image-20240515100159517.png" /></p></li>
</ol>
<!-- flag of hidden posts -->
    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>您的支持将鼓励我持续创作！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="NoBodyNoOne 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="NoBodyNoOne 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/UE/" rel="tag"># UE</a>
              <a href="/tags/UE%E7%BD%91%E7%BB%9C/" rel="tag"># UE网络</a>
              <a href="/tags/FastSharedPath/" rel="tag"># FastSharedPath</a>
          </div>

        

    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2023 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">NoBodyNoOne</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">49k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:57</span>
  </span>
</div>
<div class="busuanzi-count">
</div>

    </div>
  </footer>

  

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>



  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"fdcumt/fdcumt.github.io","issue_term":"title","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
